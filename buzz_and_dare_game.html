<!DOCTYPE html>
<html lang="de" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buzz & Dare - Frutiger Aero Edition</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0">
    <link rel="stylesheet" href="frutiger_aero.css">
    <style>
        /* Spezifische Anpassungen, die nicht im Global-CSS sind */
        .player-chip {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(180deg, rgba(255,255,255,0.9) 0%, rgba(200,230,255,0.8) 100%);
            border: 1px solid #fff;
            padding: 5px 12px;
            border-radius: 15px;
            margin: 4px 4px 0 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-size: 0.9rem;
            color: #0052cc;
        }

        .player-remove {
            background: transparent;
            border: none;
            color: #ff4444;
            font-weight: bold;
            margin-left: 8px;
            cursor: pointer;
        }

        /* Inputs an das Aero-Design anpassen */
        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #aaccff;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
            outline: none;
            margin-bottom: 5px;
            color: #003366;
            font-family: 'Segoe UI', sans-serif;
            font-weight: 600;
        }

        .history-entry {
            padding: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.5);
            font-size: 0.9rem;
            color: #003366;
        }

        .highlight-text {
            color: #0052cc;
            font-weight: bold;
            text-shadow: 0 0 5px rgba(255,255,255,0.8);
        }

        label {
            color: #003366;
            font-weight: 600;
            display: block;
            margin-bottom: 4px;
        }

        /* Checkbox/Radio Buttons an Aero-Look anpassen */
        input[type="radio"] {
            accent-color: #0052cc;
            transform: scale(1.2);
        }
    </style>
</head>

<body class="antialiased overflow-x-hidden bg-animate">

    <div id="bubble-container"></div>
    <div id="cloud-container"></div>
    <div id="music-container"></div>
    <div id="icon-container"></div>

    <nav class="fixed top-0 w-full z-50 px-6 py-4">
        <div class="max-w-7xl container">
            <div class="glass rounded-full px-8 py-4 flex justify-between items-center transition-all duration-300">
                <div class="flex items-center gap-3">
                    <div class="orb w-10 h-10 flex items-center justify-center text-2xl" style="background-color: #f0f8ff;">
                        üçª
                    </div>
                    <span class="font-bold text-xl text-glossy">Buzz & Dare Game</span>
                </div>
                <div class="flex gap-6 text-sm font-semibold">
                    <a href="index.html" class="nav-link">Back to Homepage</a>
                </div>
            </div>
        </div>
    </nav>

    <div id="f-container" class="container mx-auto px-6 py-24 space-y-8 relative z-10 pt-40">
        
        <div class="f-content mb-8 text-center">
            <h1 class="gradient-text text-5xl font-bold mb-2">Get Buzzed!</h1>
            <p style="color: #004488;">Drinking & Truth or Dare Game</p>
            <div class="text-xs" style="color: #003366; margin-top:5px;">Responsible play recommended ‚Ä¢ Alcohol-free options allowed</div>
        </div>

        <div class="grid md-grid-cols-2 gap-8">
            
            <aside class="aero-glass p-6 rounded-3xl card-hover">
                <h2 class="text-xl font-bold text-glossy mb-4">Players</h2>
                
                <div class="mb-4">
                    <input id="nameInput" type="text" placeholder="Enter name & press Enter" />
                    <div id="playersList" class="flex flex-wrap gap-2 mt-2 min-h-[40px]">
                        </div>
                    
                    <div class="flex gap-2 mt-4">
                        <button id="pickPlayerBtn" class="glossy-button p-2 text-white w-full font-bold">Pick Random</button>
                        <button id="clearPlayers" class="glossy-button p-2 text-white w-full font-bold" style="filter: hue-rotate(180deg);">Clear All</button>
                    </div>
                </div>

                <hr class="border-white opacity-50 my-4">

                <h3 class="font-bold text-glossy mb-2">Game Modes</h3>
                <div class="space-y-2 mb-4" style="color: #003366;">
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input type="radio" name="mode" value="classic" checked /> Classic (Draw Card)
                    </label>
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input type="radio" name="mode" value="spin" /> Spin (Pick Player)
                    </label>
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input type="radio" name="mode" value="custom" disabled /> Custom Cards (Soon)
                    </label>
                </div>

                <hr class="border-white opacity-50 my-4">

                <h3 class="font-bold text-glossy mb-2">Sip Settings</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="text-sm">Min Sips</label>
                        <input id="minSip" type="number" value="1" min="0" />
                    </div>
                    <div>
                        <label class="text-sm">Max Sips</label>
                        <input id="maxSip" type="number" value="3" min="0" />
                    </div>
                </div>
            </aside>

            <main class="flex flex-col gap-8">
                
                <div class="project-card p-8 text-center flex flex-col items-center justify-center min-h-[350px]">
                    <div class="shine-overlay"></div>
                    
                    <div class="orb w-14 h-14 mb-6 flex items-center justify-center">
                        <span style="font-size: 24px; font-weight:bold; color:#0052cc;">!</span>
                    </div>

                    <div id="mainCard" class="text-3xl font-bold text-glossy mb-8 leading-relaxed">
                        Loading cards...
                    </div>

                    <div class="grid grid-cols-2 gap-4 w-full">
                        <button id="drawCard" class="glossy-button py-3 text-white text-lg font-bold hover-scale-110 transition-transform" disabled>
                            Draw Card
                        </button>
                        <button id="spinBtn" class="glossy-button py-3 text-white text-lg font-bold hover-scale-110 transition-transform" style="filter: hue-rotate(45deg);">
                            Spin Player
                        </button>
                    </div>

                    <div class="mt-8 w-full flex justify-between text-base font-semibold" style="color: #004488;">
                        <div class="aero-glass px-4 py-2 rounded-xl">
                            Current Player: <span id="currentPlayer" class="highlight-text">‚Äî</span>
                        </div>
                        <div class="aero-glass px-4 py-2 rounded-xl">
                            Card Type: <span id="lastAction" class="highlight-text">‚Äî</span>
                        </div>
                    </div>
                </div>

                <div class="aero-glass p-4 rounded-xl flex-grow">
                    <h3 class="font-bold text-glossy mb-2 border-b border-white pb-1">History</h3>
                    <div id="history" class="overflow-y-auto max-h-[180px] space-y-2 pr-2">
                        </div>
                </div>

            </main>
        </div>
        
        <footer class="mt-12 text-center text-sm p-4 aero-glass rounded-xl" style="color: #003366;">
            Responsible play: This game is for adults. Drink responsibly. Alcohol-free options are allowed.
        </footer>
    </div>

    <script>
        // --- Hintergrund-Elemente (√úbernommen aus index.html) ---
        // Create floating bubbles
        const bubbleContainer = document.getElementById('bubble-container');
        const bubbleCount = 12;

        for (let i = 0; i < bubbleCount; i++) {
            const bubble = document.createElement('div');
            bubble.className = 'bubble';

            const size = Math.random() * 80 + 40;
            bubble.style.width = size + 'px';
            bubble.style.height = size + 'px';
            bubble.style.left = Math.random() * 100 + '%';
            bubble.style.animationDuration = (Math.random() * 10 + 15) + 's';
            bubble.style.animationDelay = Math.random() * 5 + 's';

            bubbleContainer.appendChild(bubble);
        }

        // Create clouds
        const cloudContainer = document.getElementById('cloud-container');
        const cloudCount = 8;

        for (let i = 0; i < cloudCount; i++) {
            const cloud = document.createElement('div');
            cloud.className = 'cloud';

            const width = Math.random() * 200 + 150;
            const height = width * 0.6;
            cloud.style.width = width + 'px';
            cloud.style.height = height + 'px';
            cloud.style.top = Math.random() * 40 + '%';
            cloud.style.left = Math.random() * 100 + '%';
            cloud.style.animationDuration = (Math.random() * 40 + 60) + 's';
            cloud.style.animationDelay = Math.random() * 20 + 's';

            cloudContainer.appendChild(cloud);
        }

        // Create music notes (Ersetzt durch floating-icons in index.html, aber wir behalten die notes-Struktur hier)
        const musicContainer = document.getElementById('music-container');
        const musicNotes = ['‚ô™', '‚ô´', '‚ô¨', '‚ô©'];
        const musicCount = 6;

        for (let i = 0; i < musicCount; i++) {
            const note = document.createElement('div');
            note.className = 'music-note';
            note.textContent = musicNotes[Math.floor(Math.random() * musicNotes.length)];

            note.style.left = Math.random() * 90 + 5 + '%';
            note.style.animationDuration = (Math.random() * 8 + 12) + 's';
            note.style.animationDelay = Math.random() * 10 + 's';

            musicContainer.appendChild(note);
        }

        // Create floating icons
        const iconContainer = document.getElementById('icon-container');
        const icons = [
            { emoji: 'üçª', size: '3rem' },
            { emoji: 'üé≤', size: '2.5rem' },
            { emoji: 'üíß', size: '3rem' },
            { emoji: 'ü•Ç', size: '2.5rem' },
            { emoji: 'üéâ', size: '3rem' },
            { emoji: 'ü•≥', size: '2rem' }
        ];

        icons.forEach((icon, index) => {
            const iconDiv = document.createElement('div');
            iconDiv.className = 'floating-icon';
            iconDiv.textContent = icon.emoji;
            iconDiv.style.fontSize = icon.size;

            // Position icons around the edges
            const positions = [
                { top: '15%', left: '5%' },
                { top: '25%', right: '8%' },
                { top: '45%', left: '3%' },
                { top: '60%', right: '5%' },
                { top: '75%', left: '7%' },
                { top: '80%', right: '10%' }
            ];

            if (positions[index]) {
                Object.assign(iconDiv.style, positions[index]);
            }

            iconDiv.style.animationDuration = (Math.random() * 2 + 3) + 's';
            iconDiv.style.animationDelay = Math.random() * 2 + 's';

            iconContainer.appendChild(iconDiv);
        });

        // --- Karten Daten Management ---
        let truthDareCards = [];

        // Lade die cards.json Datei
        fetch('cards.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Netzwerk-Antwort war nicht ok');
                }
                return response.json();
            })
            .then(data => {
                truthDareCards = data.cards;
                console.log("Karten erfolgreich geladen:", truthDareCards.length);
                
                // UI aktualisieren und Button aktivieren
                const mainCard = document.getElementById("mainCard");
                const drawBtn = document.getElementById("drawCard");
                
                mainCard.innerText = 'Press "Draw Card" to start!';
                drawBtn.disabled = false;
            })
            .catch(error => {
                console.error('Fehler beim Laden der Karten:', error);
                document.getElementById("mainCard").innerHTML = 
                    '<span style="color:red; font-size:0.8em; text-shadow:none;">Error loading cards.json.<br>Please ensure you are running this on a local server (CORS).</span>';
            });

        // --- Spieler Management ---
        let players = [];
        const nameInput = document.getElementById('nameInput');
        const playersList = document.getElementById('playersList');
        const pickPlayerBtn = document.getElementById('pickPlayerBtn');
        const clearPlayersBtn = document.getElementById('clearPlayers');
        const currentPlayerSpan = document.getElementById('currentPlayer');
    
        // Spieler hinzuf√ºgen bei Enter
        nameInput.addEventListener('keypress', function (e) {
          if (e.key === 'Enter') {
            const name = this.value.trim();
            if (name && !players.includes(name)) {
              players.push(name);
              updatePlayersList();
              this.value = '';
            }
          }
        });
    
        // Spielerliste aktualisieren
        function updatePlayersList() {
          playersList.innerHTML = '';
          players.forEach((player, index) => {
            const playerEl = document.createElement('div');
            playerEl.className = 'player-chip';
            playerEl.innerHTML = `
              ${player}
              <button class="player-remove" data-index="${index}">√ó</button>
            `;
            playersList.appendChild(playerEl);
          });
    
          document.querySelectorAll('.player-remove').forEach(button => {
            button.addEventListener('click', function () {
              const index = parseInt(this.getAttribute('data-index'));
              players.splice(index, 1);
              updatePlayersList();
            });
          });
        }
    
        // Zuf√§lligen Spieler w√§hlen (Spin)
        function pickRandomPlayer() {
          if (players.length === 0) {
            currentPlayerSpan.textContent = 'No players';
            return;
          }
    
          const randomIndex = Math.floor(Math.random() * players.length);
          const selectedPlayer = players[randomIndex];
          currentPlayerSpan.textContent = selectedPlayer;
    
          // History Eintrag
          addToHistory(`Selected player: <span class="highlight-text">${selectedPlayer}</span>`);
        }

        // Event Listener f√ºr Spin Button (beide Buttons k√∂nnen genutzt werden)
        pickPlayerBtn.addEventListener('click', pickRandomPlayer);
        document.getElementById('spinBtn').addEventListener('click', pickRandomPlayer);
    
        // Alle Spieler l√∂schen
        clearPlayersBtn.addEventListener('click', function () {
          players = [];
          updatePlayersList();
          currentPlayerSpan.textContent = '‚Äî';
        });

        // Helper f√ºr History
        function addToHistory(htmlContent) {
            const history = document.getElementById('history');
            const entry = document.createElement('div');
            entry.className = 'history-entry';
            entry.innerHTML = htmlContent;
            history.prepend(entry);
            // Limit history size
            while (history.children.length > 8) {
                history.removeChild(history.lastChild);
            }
        }
    
        // --- Karten ziehen Logik ---
        function drawCard() {
            if (truthDareCards.length === 0) {
                document.getElementById("mainCard").innerText = "No cards available!";
                return;
            }

            // Zuf√§llige Karte w√§hlen
            const index = Math.floor(Math.random() * truthDareCards.length);
            const card = truthDareCards[index]; 

            // Sips berechnen
            const min = parseInt(document.getElementById("minSip").value) || 1;
            const max = parseInt(document.getElementById("maxSip").value) || 3;
            const randomSips = Math.floor(Math.random() * (max - min + 1)) + min;

            // Platzhalter ersetzen
            const cardText = card.text.replace(/\{n\}/g, randomSips);

            // UI Updates
            document.getElementById("mainCard").innerText = cardText;
            
            const typeText = card.type.toUpperCase();
            document.getElementById("lastAction").innerText = typeText;

            addToHistory(`<strong>${typeText}:</strong> ${cardText}`);
        }

        document.getElementById("drawCard").addEventListener("click", drawCard);
    </script>
</body>
</html>